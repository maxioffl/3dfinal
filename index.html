<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<meta charset="utf-8">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/brfv4_examples_theme.css">
	<title>Beyond Reality Face - BRFv4 - HTML5/Javascript face tracking</title>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

  
	<script src="js/libs/createjs/preloadjs.min.js"></script>
	<script src="js/BRFv4Demo.js"></script>

	<script>
		window.onload = brfv4Example.start; //see js/BRFv4Demo.js
	</script>
  <style>
  
  </style>
</head>
  

<body>

<div id="_wrapper" >

  <div id="_content">
    
    <div id="myModal" class="modal">
      
      <div class="modal-content">
        <span class="close">&times;</span>
          <label id="progress" class="progress">
          </label>
          <video  id="_webcam"></video>
          <canvas id="_imageData"></canvas>
          <canvas id="_faceSub"></canvas>
          <canvas id="_t3d"></canvas>
          <canvas id="_f3d"></canvas>
          <canvas id="_drawing"></canvas>
        </div>
      </div>
  </div>
  <center>
    <h1 id="title">
      Mind Blenderz
    </h1>
    <p id="tagline">
      World class products
    </p>
    <div class="container whole">
        <div class="row">
          <div class="col-xs-12 col-lg-3">
            <div class="card" style="width: 18rem;">
              <img class="card-img-top" src="assets/image1.png" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title">Blue Sun Glass</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, no vix postea gloriatur, natum dolorem cum an.</p>
                <button id="1" onclick="loadThreeJS(this.id)" class="btn btn-primary tryonBtn">Tryon Loading...</button>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-lg-3">
            <div class="card" style="width: 18rem;">
              <img class="card-img-top" src="assets/image2.jpg" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title">Violet Sun Glass</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, no vix postea gloriatur, natum dolorem cum an.</p>
                <button id="2" onclick="loadThreeJS(this.id)" class="btn btn-primary tryonBtn">Tryon Loading...</button>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-lg-3">
            <div class="card" style="width: 18rem;">
              <img class="card-img-top" src="assets/image3.jpg" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title">Eye Glass</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, no vix postea gloriatur, natum dolorem cum an.</p>
                <button id="3" onclick="loadThreeJS(this.id)" class="btn btn-primary tryonBtn">Tryon Loading...</button>
              </div>
            </div>
          </div>
           <div class="col-xs-12 col-lg-3">
            <div class="card" style="width: 18rem;">
              <img class="card-img-top" src="assets/image5.jpg" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title">Eye Glass</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, no vix postea gloriatur, natum dolorem cum an.</p>
                <button id="4" onclick="loadThreeJS(this.id)" class="btn btn-primary tryonBtn">Tryon Loading...</button>
              </div>
            </div>
          </div>
        </div>
        <br>
        <div class="row">
          <div class="col-xs-12 col-lg-3">
            <div class="card" style="width: 18rem;">
              <img class="card-img-top" src="assets/image4.jpg" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title">Eye Glass</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, no vix postea gloriatur, natum dolorem cum an.</p>
                <button id="5" onclick="loadThreeJS(this.id)" class="btn btn-primary tryonBtn">Tryon Loading...</button>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-lg-3">
            <div class="card" style="width: 18rem;">
              <img class="card-img-top" src="assets/image6.jpg" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title">Eye Glass</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, no vix postea gloriatur, natum dolorem cum an.</p>
                <button id="6" onclick="loadThreeJS(this.id)" class="btn btn-primary tryonBtn">Tryon Loading...</button>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-lg-3">
            <div class="card" style="width: 18rem;">
              <img class="card-img-top" src="assets/image7.jpg" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title">Eye Glass</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, no vix postea gloriatur, natum dolorem cum an.</p>
                <button id="7" onclick="loadThreeJS(this.id)" class="btn btn-primary tryonBtn">Tryon Loading...</button>
              </div>
            </div>
          </div>
           <div class="col-xs-12 col-lg-3">
            <div class="card" style="width: 18rem;">
              <img class="card-img-top" src="assets/image8.jpg" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title">Sky Sun Glass</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, no vix postea gloriatur, natum dolorem cum an.</p>
                <button id="8" onclick="loadThreeJS(this.id)" class="btn btn-primary tryonBtn">Tryon Loading...</button>
              </div>
            </div>
          </div>
        </div>
      
      </div>
  </center>
  </div>
  

</body>

</html>

<script>
        sessionStorage.setItem("webcam", "loading");

  var loadWebcam, tryonBtn;
  tryonBtn = document.getElementsByClassName("tryonBtn");
  var setInter = setInterval(function () {
      loadWebcam = sessionStorage.getItem('webcam'); 
      if(loadWebcam == "loading"){
        disableTryon();
      }
      if(loadWebcam == "loaded"){
          enableTryon();;

      }
  }, 3600);
  function disableTryon(){
      console.log(tryonBtn[0].text)
      for(let i = 0 ; i < tryonBtn.length ; i++)
        {
          tryonBtn[i].disabled = true
          tryonBtn[i].innerHTML = "Tryon Loading..."
        }
  }
  function enableTryon(){
      clearInterval(setInter)
      console.log(tryonBtn[0].text)
      for(let i = 0 ; i < tryonBtn.length ; i++)
        {
          tryonBtn[i].disabled = false;
          tryonBtn[i].innerHTML = "Tryon"
        }
  }
  // Get the modal
var modal = document.getElementById("myModal");

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
  function onExampleLoaded() {
		brfv4Example.reinit();
	}
  function loadThreeJS(id){
     var progress = document.getElementById("progress");

      progress.innerHTML = 'Please wait. Image is loading...  <i id="totalFile"></i> of <i id="loaded"></i>'

    sessionStorage.getItem('Imagestatus') == "Loading"
    sessionStorage.setItem("imagenumber", id)
    modal.style.display = "block";
		brfv4Example.loader.loadExample(["js/examples/face_tracking/ThreeJS_example.js"], onExampleLoaded);
      var loaded = document.getElementById("loaded");
      var totalFile = document.getElementById("totalFile");
      var setProgress = setInterval(function () {
    console.log(sessionStorage.getItem('Filesloaded'))
    if(sessionStorage.getItem('Totalfiles') !== null && sessionStorage.getItem('Filesloaded') !== null)
    {
      totalFile.innerHTML = sessionStorage.getItem('Totalfiles')+"";
      loaded.innerHTML = sessionStorage.getItem('Filesloaded')+"";
    }
    if(sessionStorage.getItem('Imagestatus') == "Loaded")
      {
        clearInterval(setProgress);
        progress.innerHTML = "";
      }
  }, 60);
  }
  
  

</script>
